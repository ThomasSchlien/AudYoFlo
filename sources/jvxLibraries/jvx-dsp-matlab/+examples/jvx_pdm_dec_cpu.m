% jvx_pdm_dec_cpu
LIR = 64*8;
[hdl] = jvx_dsp.pdm.jvx_pdm_dec_cpu_init_r16(LIR, true);
%sig = [1 1 1 0 1  zeros(1, 1019)];
sig = [...
     1     1     0     0     1     0     0     0     1     0     1     1     1     1     1     0     1     1     1     0     0     0     0     1 ...
     0     1     1     1     1     1     0     1     0     1     1     0     0     1     0     1     0     0     0     1     1     0     1     0 ...
     1     1     1     0     1     0     1     1     1     0     0     0     0     1     0     0     0     0     1     1     0     1     1     1 ...
     1     0     0     1     1     0     0     0     0     0     0     0     1     1     0     1     1     1     1     1     1     1     0     1 ...
     0     0     1     1     0     1     1     1     1     0     0     1     1     0     1     0     0     1     1     1     0     1     0     0 ...
     0     0     1     1     1     0     0     1     1     0     0     1     1     0     0     1     1     0     0     1     0     0     1     1 ...
     0     1     1     1     0     0     0     0     0     0     1     1     0     1     1     0     1     0     1     0     0     1     1     1 ...
     1     0     0     1     0     0     0     1     1     0     0     1     0     0     0     1     0     0     0     0     0     1     0     1 ...
     1     1     1     0     0     0     1     1     0     1     1     1     1     0     0     0     1     0     1     1     0     0     1     1 ...
     0     0     0     1     0     0     1     1     1     0     1     1     0     0     1     0     1     1     1     0     1     1     0     0 ...
     1     1     1     0     0     0     0     1     1     0     0     1     0     1     1     1     1     1     0     0     1     0     0     1 ...
     0     1     0     0     1     0     1     1     1     0     1     0     0     0     0     0     0     1     0     1     1     0     1     0 ...
     1     0     1     0     0     0     1     0     1     0     0     0     1     1     0     1     0     1     0     0     1     1     0     0 ...
     1     1     1     0     1     0     0     0     0     1     0     0     0     1     1     1     1     0     1     1     1     1     1     0 ...
     1     1     0     0     1     0     0     0     0     0     0     0     0     1     0     1     1     0     0     1     0     0     1     0 ...
     1     1     0     1     0     1     1     1     1     1     0     0     0     0     1     0     0     0     1     1     1     1     0     0 ...
     0     1     1     1     0     0     0     0     0     0     0     0     0     1     1     0     0     0     0     1     1     0     1     0 ...
     1     0     0     0     1     0     0     1     0     0     0     1     0     1     1     0     1     1     0     0     1     0     0     0 ...
     0     0     1     1     1     1     1     1     0     1     0     0     1     1     1     1     0     0     0     0     1     0     1     1 ...
     1     1     0     1     0     1     1     1     0     1     0     0     1     0     1     1     0     1     0     1     1     0     1     0 ...
     1     1     1     0     1     1     1     0     1     0     1     0     1     1     1     0     0     0     1     1     0     0     0     1 ...
     0     0     0     1     1     0     1     1     0     1     0     0     0     1     0     1     0     1     1     0     0     1     0     1 ...
     0     1     1     1     0     0     1     1     1     1     1     0     1     1     0     0     1     1     1     1     1     0     0     0 ...
     1     1     1     1     1     1     1     0     1     0     0     1     0     0     1     0     1     1     1     0     0     0     1     1 ...
     0     0     1     1     0     1     1     1     1     1     1     0     1     1     0     0     0     1     1     0     1     0     0     1 ...
     0     1     1     0     0     1     0     1     0     0     0     1     0     1     0     0     1     0     1     1     1     0     1     1 ...
     1     0     1     1     1     1     1     0     0     1     1     1     1     1     0     0     0     0     1     0     0     0     0     0 ...
     0     0     0     1     0     1     1     0     0     1     1     0     0     1     0     1     0     1     1     0     1     0     1     1 ...
     1     0     1     0     1     1     0     0     0     0     0     0     1     0     1     1     1     0     0     0     0     0     1     1 ...
     1     0     0     0     1     0     1     1     1     1     0     1     1     1     0     0     0     1     1     0     0     1     0     0 ...
     1     0     1     1     0     1     1     0     1     1     0     0     0     0     1     0     1     0     1     1     1     1     0     1 ...
     1     0     1     1     1     1     0     0     1     1     1     0     1     1     0     0     0     0     1     0     1     0     1     1 ...
     1     1     0     1     1     0     1     0     0     1     0     1     0     0     1     0     1     1     1     0     1     1     1     0 ...
     0     1     1     0     1     1     0     1     0     0     1     1     0     1     1     1     1     0     1     0     1     0     0     0 ...
     1     0     0     0     1     0     1     0     0     0     0     1     1     1     1     0     0     1     0     1     0     1     1     1 ...
     0     1     0     1     1     0     0     1     0     1     1     0     0     1     1     0     1     1     0     0     0     1     0     0 ...
     1     1     0     1     1     1     1     0     0     0     1     0     0     0     0     1     1     1     0     0     1     0     0     1 ...
     1     1     1     0     1     0     1     0     0     0     0     1     0     1     1     1     1     0     1     0     1     1     1     1 ...
     0     0     1     0     0     0     1     0     0     0     1     0     1     1     1     0     0     1     0     0     1     1     0     1 ...
     1     1     0     0     1     1     0     0     1     0     1     1     0     0     1     1     0     0     0     1     0     1     1     1 ...
     1     1     1     1     1     1     1     1     1     1     0     0     0     0     0     1     0     0     1     0     0     1     0     1 ...
     1     1     1     1     0     0     1     1     0     0     0     1     0     1     1     1     1     1     1     1     0     0     1     1 ...
     1     0     0     0     0     0     1     0     0     1     1     0     1     0     0     0];
     
sig(find(sig < 1)) = -1;

out0 = filter(hdl.ir, 1, sig);
[hdl, out1] =  jvx_dsp.pdm.jvx_pdm_dec_cpu_process_r16(hdl, sig);

figure;
plot(out0(16:16:end));
hold on;
plot(out1, 'r:');